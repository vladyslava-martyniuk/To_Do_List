{% extends "base.html" %}

{% block content %}

<div class="header-row">
  <h2>–°–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å</h2>
  <a class="btn btn-primary" href="{{ url_for('add_task') }}">‚ûï –î–æ–¥–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è</a>
</div>

<form method="get" action="{{ url_for('tasks_page') }}" class="filter-form">
    <input type="text" name="q" placeholder="üîç –ü–æ—à—É–∫ –∑–∞ –Ω–∞–∑–≤–æ—é" value="{{ search or '' }}">
    <select name="status">
        <option value="">–°—Ç–∞—Ç—É—Å</option>
        <option value="new" {% if status=='new' %}selected{% endif %}>–ù–æ–≤–µ</option>
        <option value="in_progress" {% if status=='in_progress' %}selected{% endif %}>–í –ø—Ä–æ—Ü–µ—Å—ñ</option>
        <option value="done" {% if status=='done' %}selected{% endif %}>–í–∏–∫–æ–Ω–∞–Ω–æ</option>
    </select>
    
    <button type="submit">–§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏</button>
</form>

{% if tasks %}
<table class="styled-table">
    <thead>
        <tr>
            <th>–ù–∞–∑–≤–∞</th>
            <th>–û–ø–∏—Å</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            
            <th>–î—ñ—ó</th>
        </tr>
    </thead>
    <tbody>
        {% for task in tasks %}
        <tr>
            <td>{{ task.title }}</td>
            <td>{{ task.description }}</td>
            <td>
                {% if task.status == 'done' %} ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ
                {% elif task.status == 'in_progress' %} üîÑ –í –ø—Ä–æ—Ü–µ—Å—ñ
                {% else %} üìù –ù–æ–≤–µ {% endif %}
            </td>
          
            <td class="actions">
                <a href="{{ url_for('edit_task', task_id=task.id) }}" class="btn btn-edit">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                <form action="{{ url_for('delete_task', task_id=task.id) }}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-delete" onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏?');">üóë –í–∏–¥–∞–ª–∏—Ç–∏</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="not-found">–ó–∞–≤–¥–∞–Ω—å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>
{% endif %}

{% endblock %}
