{% extends "base.html" %}

{% block title %}–ú–æ—ó –∑–∞–≤–¥–∞–Ω–Ω—è{% endblock %}

{% block content %}
<div class="first-div">
  

    <!-- –í–µ—Ä—Ö–Ω—è –ø–∞–Ω–µ–ª—å –∑ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è–º —ñ –≤–∏—Ö–æ–¥–æ–º -->
        <h1>To Do Tasker</h1>
        <p>–û—Ä–≥–∞–Ω—ñ–∑—É–π —Å–≤—ñ–π –¥–µ–Ω—å: —à–≤–∏–¥–∫–æ, –ª–µ–≥–∫–æ —Ç–∞ –∑—Ä—É—á–Ω–æ.</p>
        <h2 class="tasks-greating" >–ü—Ä–∏–≤—ñ—Ç, {{ username }} !</h2>
       
    

    <!-- –ü–æ—à—É–∫ —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∏ -->
     <div class="tasks_filters centered">
    <form method="get" action="{{ url_for('tasks_page') }}" class="task_filter_form" >
        <input type="text" name="q" value="{{ search }}" placeholder="–ü–æ—à—É–∫..."  class="task_filter_input">
        <select name="status"class="task_filter_select">
            <option value="">–í—Å—ñ</option>
            <option value="new" {% if status == 'new' %}selected{% endif %}>–ù–æ–≤—ñ</option>
            <option value="in_progress" {% if status == 'in_progress' %}selected{% endif %}>–í –ø—Ä–æ—Ü–µ—Å—ñ</option>
            <option value="done" {% if status == 'done' %}selected{% endif %}>–í–∏–∫–æ–Ω–∞–Ω—ñ</option>
        </select>
        <button type="submit" class="task_filter_button">
            üîç
        </button>
    </form>
</div>
    <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è -->
    <div class="btn_wrapper">
        <button type="button" class="add_task-button">
        <a href="{{ url_for('add_task') }}" 
           class="add_task-link ">
            ‚ûï –î–æ–¥–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è
        </a>
    </button>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å —É —Ç–∞–±–ª–∏—Ü—ñ -->
    <div class="table-wrapper">
        <table class="table-glass">
            <thead>
                <tr class="bg-gray-200 text-gray-700">
                    <th class="px-4 py-2 text-left">–ù–∞–∑–≤–∞</th>
                    <th class="px-4 py-2 text-left">–û–ø–∏—Å</th>
                    <th class="px-4 py-2 text-left">–°—Ç–∞—Ç—É—Å</th>
                    <th class="px-4 py-2 text-center">–î—ñ—ó</th>
                </tr>
            </thead>
            <tbody>
                {% for task in tasks %}
                    <tr class="border-b hover:bg-gray-50">
                        <td class="px-4 py-2 font-medium">{{ task.title }}</td>
                        <td class="px-4 py-2">{{ task.description }}</td>
                        <td class="px-4 py-2">
                            {% if task.status == "new" %}
                                <span class="status-badge status-new">–ù–æ–≤–µ</span>
                            {% elif task.status == "in_progress" %}
                                <span class="status-badge status-progress">–í –ø—Ä–æ—Ü–µ—Å—ñ</span>
                            {% elif task.status == "done" %}
                               <span class="status-badge status-done">–í–∏–∫–æ–Ω–∞–Ω–æ</span>
                            {% endif %}
                        </td>
                        <td class="px-4 py-2 text-center flex justify-center gap-2">
                            <form action="{{ url_for('edit_task', task_id=task.id, q=search, status=status) }}" method="get">
    <button type="submit" class="action_button">‚úèÔ∏è</button>
</form>

                          <form method="post" action="{{ url_for('delete_task', task_id=task.id, q=search, status=status) }}" 
                            onsubmit="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ –∑–∞–≤–¥–∞–Ω–Ω—è?');">
                           <button type="submit" class="action_button">üóëÔ∏è</button>
</form>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="4" class="text-center text-gray-500 py-4">–ó–∞–≤–¥–∞–Ω—å –ø–æ–∫–∏ –Ω–µ–º–∞—î</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
{% endblock %}

