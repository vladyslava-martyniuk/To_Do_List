{% extends "base.html" %}

{% block title %}
  {% if mode == 'add' %}Додати завдання{% else %}Редагувати завдання{% endif %}
{% endblock %}

{% block content %}
<h2>
  {% if mode == 'add' %}Додати завдання{% else %}Редагувати завдання{% endif %}
</h2>

{% if error %}
<p style="color:red">{{ error }}</p>
{% endif %}

{% if success %}
<p style="color:green">{{ success }}</p>
{% endif %}

<form method="post">
  <label>Назва завдання:</label><br>
  <input type="text" name="title" value="{{ task.title if task else '' }}" required><br><br>

  <label>Опис завдання:</label><br>
  <textarea name="description" required>{{ task.description if task else '' }}</textarea><br><br>

  <label>Статус:</label><br>
  <select name="status" required>
    <option value="new" {% if task and task.status == 'new' %}selected{% endif %}>Нове</option>
    <option value="in_progress" {% if task and task.status == 'in_progress' %}selected{% endif %}>В процесі</option>
    <option value="done" {% if task and task.status == 'done' %}selected{% endif %}>Виконано</option>
  </select><br><br>

  <button type="submit">
    {% if mode == 'add' %}Додати{% else %}Зберегти{% endif %}
  </button>
</form>

<a href="{{ url_for('tasks_page', q=request.args.get('q'), status=request.args.get('status')) }}">⬅ Назад</a>
{% endblock %}
