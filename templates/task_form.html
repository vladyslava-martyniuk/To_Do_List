{% extends "base.html" %}

{% block title %}
  {% if mode == 'add' %}Додати завдання{% else %}Редагувати завдання{% endif %}
{% endblock %}

{% block content %}
<div class="body_task_form">
  <div class="task_form-box">
    <h2>
      {% if mode == 'add' %}Додати завдання{% else %}Редагувати завдання{% endif %}
    </h2>

    {% if error %}
      <div style="background:#ffdddd; border-left:6px solid #f44336; padding:10px; margin-bottom:15px; border-radius:8px; color:#b30000;">
        {{ error }}
      </div>
    {% endif %}

    {% if success %}
      <div style="background:#ddffdd; border-left:6px solid #4CAF50; padding:10px; margin-bottom:15px; border-radius:8px; color:#006600;">
        {{ success }}
      </div>
    {% endif %}

    <form method="post">
      <div>
        <label>Назва завдання:</label>
        <input type="text" name="title" value="{{ task.title if task else '' }}" required>
      </div>

      <div>
        <label>Опис завдання:</label>
        <textarea name="description" required>{{ task.description if task else '' }}</textarea>
      </div>

      <div>
        <label>Статус:</label>
        <select name="status" required>
          <option value="new" {% if task and task.status == 'new' %}selected{% endif %}>Нове</option>
          <option value="in_progress" {% if task and task.status == 'in_progress' %}selected{% endif %}>В процесі</option>
          <option value="done" {% if task and task.status == 'done' %}selected{% endif %}>Виконано</option>
        </select>
      </div>

      <button type="submit">
        {% if mode == 'add' %}Додати{% else %}Зберегти{% endif %}
      </button>
    </form>

    <p class="text-center">
      <a href="{{ url_for('tasks_page', q=request.args.get('q'), status=request.args.get('status')) }}">
        ⬅ Назад
      </a>
    </p>
  </div>
</div>
{% endblock %}
